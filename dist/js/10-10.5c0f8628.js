(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{317:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s}),n.d(t,"c",function(){return f}),n.d(t,"b",function(){return p});var r=n(330),a=n.n(r),o=n(101),c=n(320),i=n(51),u=(n(52),e.env.API_BASE||"http://3be1627f.ngrok.io"),l=function(e,t){t=t||{};var n=Object.keys(t).reduce(function(e,n){return e+=n+"="+t[n]+"&"},"");return""+u+e+"?"+n.substr(0,n.length-1)},s=function(e,t){return new Promise(function(n,r){a.a.get(l(e,t)).then(function(e){var t=e.data;t&&"成功"===t.msg?n(t):r(t)}).catch(r)})},f=function(e,t){return new Promise(function(n,r){a.a.post(l(e,t)).then(function(e){var t=e.data;t&&"成功"===t.msg?n(t):r(t)}).catch(r)})},p=function(e,t){return new Promise(function(n,r){i.a.dispatch(Object(c.b)("login")),a.a.post(l(e,t)).then(function(e){var t=e.data;t&&0===t.code?(i.a.dispatch(Object(o.a)()),i.a.dispatch(Object(c.c)("login",t)),n(t),console.log("login_in",t)):(i.a.dispatch(Object(o.b)()),i.a.dispatch(Object(c.a)("login",t)),r(t))}).catch(function(e){console.log("login_out",e),i.a.dispatch(Object(o.b)()),i.a.dispatch(Object(c.a)("login",e)),r(e)})})}}).call(this,n(326))},320:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return c});var r=n(35),a=(n(317),function(e){return{type:e+"_"+r.b}}),o=function(e,t){return{type:e+"_"+r.c,result:t}},c=function(e,t){return{type:e+"_"+r.a,error:t}}},322:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(35),a=n(317),o=function(e,t,n){return function(o){var c="/mall"+n;o(function(e){return{type:e+"_"+r.b}}(e)),Object(a.a)(c,t).then(function(t){o(function(e,t){return{type:e+"_"+r.c,result:t}}(e,t))}).catch(function(t){o(function(e,t){return{type:e+"_"+r.a,error:t}}(e,t))})}}},590:function(e,t,n){"use strict";n.r(t);n(141);var r=n(66),a=(n(366),n(596)),o=n(1),c=n.n(o),i=n(317),u=(n(50),n(0)),l=n.n(u),s=(n(73),n(67)),f=(n(365),n(592)),p=(n(100),n(598)),d=(n(72),n(15)),m=(n(329),n(601)),b=n(12);n(322);n(311);var h=m.a.Item,g=m.a.create()(function(e){var t=e.form,n=e.handleSubmit,r=e.loading,a=t.getFieldDecorator;return c.a.createElement("div",null,c.a.createElement(m.a,{onSubmit:function(e){return t.validateFields(function(t,r){return n(e,t,r)})},className:"login-form"},c.a.createElement(h,{label:"用户名",hasFeedback:!0},a("username",{rules:[{required:!0,message:"请输入你的账号哦!"}]})(c.a.createElement(p.a,{prefix:c.a.createElement(d.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),c.a.createElement(h,{label:"密码",hasFeedback:!0},a("password",{rules:[{required:!0,message:"请输入你的密码哦!"}]})(c.a.createElement(p.a,{prefix:c.a.createElement(d.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),c.a.createElement(h,null,a("remember",{valuePropName:"checked",initialValue:!0})(c.a.createElement(f.a,null,"记住密码")),c.a.createElement("a",{className:"login-form-forgot",href:""},"Forgot password"),c.a.createElement(s.a,{loading:r,type:"primary",htmlType:"submit",className:"login-form-button"},"登入"),"还没有账号 ",c.a.createElement(b.b,{to:"/regist"},"立即注册!"))))}),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};n(302);var v=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments));return n.state={loading:!1},n.handleSubmit=n.handleSubmit.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.handleSubmit=function(e,t,n){var r=this;e.preventDefault(),t||(this.setState({loading:!0}),Object(i.b)("/mall/user/user/login",JSON.parse(JSON.stringify(y({},n)))).then(function(e){r.setState({loading:!1}),r.context.router.history.push("/index")}).catch(function(e){r.setState({loading:!1}),a.a.error(""+e)}),console.log("Received values of form: ",n))},t.prototype.render=function(){r.a.Header,r.a.Content,r.a.Sider;return c.a.createElement("div",{className:"login_bg bg_img"},c.a.createElement("div",{className:"loginContainer "},c.a.createElement("h3",null,"登录校园旧书街"),c.a.createElement(g,{loading:this.state.loading,handleSubmit:this.handleSubmit})))},t}(o.Component);v.contextTypes={router:l.a.object};t.default=v}}]);