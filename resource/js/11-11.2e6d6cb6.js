(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{317:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return u}),a.d(t,"c",function(){return m}),a.d(t,"b",function(){return d});var n=a(330),r=a.n(n),o=a(101),c=a(320),i=a(51),l=(a(52),e.env.API_BASE||"http://3be1627f.ngrok.io"),s=function(e,t){t=t||{};var a=Object.keys(t).reduce(function(e,a){return e+=a+"="+t[a]+"&"},"");return""+l+e+"?"+a.substr(0,a.length-1)},u=function(e,t){return new Promise(function(a,n){r.a.get(s(e,t)).then(function(e){var t=e.data;t&&"成功"===t.msg?a(t):n(t)}).catch(n)})},m=function(e,t){return new Promise(function(a,n){r.a.post(s(e,t)).then(function(e){var t=e.data;t&&"成功"===t.msg?a(t):n(t)}).catch(n)})},d=function(e,t){return new Promise(function(a,n){i.a.dispatch(Object(c.b)("login")),r.a.post(s(e,t)).then(function(e){var t=e.data;t&&0===t.code?(i.a.dispatch(Object(o.a)()),i.a.dispatch(Object(c.c)("login",t)),a(t),console.log("login_in",t)):(i.a.dispatch(Object(o.b)()),i.a.dispatch(Object(c.a)("login",t)),n(t))}).catch(function(e){console.log("login_out",e),i.a.dispatch(Object(o.b)()),i.a.dispatch(Object(c.a)("login",e)),n(e)})})}}).call(this,a(326))},320:function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"c",function(){return o}),a.d(t,"a",function(){return c});var n=a(35),r=(a(317),function(e){return{type:e+"_"+n.b}}),o=function(e,t){return{type:e+"_"+n.c,result:t}},c=function(e,t){return{type:e+"_"+n.a,error:t}}},322:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(35),r=a(317),o=function(e,t,a){return function(o){var c="/mall"+a;o(function(e){return{type:e+"_"+n.b}}(e)),Object(r.a)(c,t).then(function(t){o(function(e,t){return{type:e+"_"+n.c,result:t}}(e,t))}).catch(function(t){o(function(e,t){return{type:e+"_"+n.a,error:t}}(e,t))})}}},323:function(e,t,a){"use strict";a(14),a(332)},332:function(e,t,a){},337:function(e,t,a){"use strict";a(72);var n=a(15),r=(a(140),a(65)),o=(a(323),a(368)),c=a(1),i=a.n(c),l=a(0),s=a.n(l),u=a(12);a(300);var m=function(e){var t=e.item,a="hotBook"===e.type?"/detail/"+t.id:"/seller/"+t.id;return i.a.createElement(r.a.Item,{className:"text-overflow hover"},i.a.createElement(u.b,{to:a,title:t.name},t.img?i.a.createElement(o.a,{shape:"square",style:{backgroundColor:"#87d068"},src:t.img}):i.a.createElement(o.a,{shape:"square",style:{backgroundColor:"#87d068"},icon:"book"}),t.name,"    ","("+t.collect+")"))},d=function(e){e.path;return i.a.createElement("div",{className:"footer"},i.a.createElement(u.b,{to:"/path/?q=all"},"查看更多",i.a.createElement(n.a,{type:"double-right"})))},f=function(e){return e.data.map(function(e,t){return i.a.createElement("div",{className:"siderContainer",key:t+"slider"},i.a.createElement("h3",{className:"header"},e.header),i.a.createElement(r.a,{size:"small",footer:i.a.createElement(d,null),bordered:!0,dataSource:e.data,renderItem:function(t){return i.a.createElement(m,{item:t,type:e.type})}}))})};f.propTypes={data:s.a.array.isRequired},t.a=f},346:function(e,t,a){"use strict";var n=a(1),r=a.n(n),o=a(0),c=a.n(o);a(303);var i=function(e){var t=e.userInfo;return console.log(t),r.a.createElement("div",{className:"user_container overflow_hidden white_bgColor"},r.a.createElement("div",{className:"user_img"},r.a.createElement("img",{className:"user_profile",src:"http://ubookmall.b0.upaiyun.com/user/2017/10/03/7564424992_1507024484.jpg!big",alt:"墨香书阁"})),r.a.createElement("div",{className:"user_nav_info overflow_hidden"},r.a.createElement("ul",{className:"paddingNone"},r.a.createElement("li",null,t.userName),r.a.createElement("li",null,t.sex),r.a.createElement("li",null,t.school),r.a.createElement("li",null,t.city),r.a.createElement("li",null,r.a.createElement("a",{className:"user_fan_faned_link",href:"http://www.jiushujie.com/user/18034599/follow"},"关注("+t.fan+")")," ",r.a.createElement("a",{className:"user_fan_faned_link",href:"http://www.jiushujie.com/user/18034599/fan"},"粉丝("+t.concern+")")))))};i.propTypes={userInfo:c.a.object.isRequired},t.a=i},368:function(e,t,a){"use strict";var n=a(2),r=a.n(n),o=a(6),c=a.n(o),i=a(4),l=a.n(i),s=a(8),u=a.n(s),m=a(3),d=a.n(m),f=a(5),p=a.n(f),h=a(1),b=a(9),E=a(15),g=a(7),v=a.n(g),y=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a},_=function(e){function t(e){l()(this,t);var a=d()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.setScale=function(){var e=a.avatarChildren;if(e){var t=e.offsetWidth,n=b.findDOMNode(a).getBoundingClientRect().width;n-8<t?a.setState({scale:(n-8)/t}):a.setState({scale:1})}},a.handleImgLoadError=function(){return a.setState({isImgExist:!1})},a.state={scale:1,isImgExist:!0},a}return p()(t,e),u()(t,[{key:"componentDidMount",value:function(){this.setScale()}},{key:"componentDidUpdate",value:function(e,t){(e.children!==this.props.children||t.scale!==this.state.scale&&1===this.state.scale||t.isImgExist!==this.state.isImgExist)&&this.setScale()}},{key:"render",value:function(){var e,t,a=this,n=this.props,o=n.prefixCls,i=n.shape,l=n.size,s=n.src,u=n.icon,m=n.className,d=y(n,["prefixCls","shape","size","src","icon","className"]),f=v()((e={},c()(e,o+"-lg","large"===l),c()(e,o+"-sm","small"===l),e)),p=v()(o,m,f,(t={},c()(t,o+"-"+i,i),c()(t,o+"-image",s&&this.state.isImgExist),c()(t,o+"-icon",u),t)),b=this.props.children;if(s&&this.state.isImgExist)b=h.createElement("img",{src:s,onError:this.handleImgLoadError});else if(u)b=h.createElement(E.a,{type:u});else{var g=this.avatarChildren;if(g||1!==this.state.scale){var _={msTransform:"scale("+this.state.scale+")",WebkitTransform:"scale("+this.state.scale+")",transform:"scale("+this.state.scale+")",position:"absolute",display:"inline-block",left:"calc(50% - "+Math.round(g.offsetWidth/2)+"px)"};b=h.createElement("span",{className:o+"-string",ref:function(e){return a.avatarChildren=e},style:_},b)}else b=h.createElement("span",{className:o+"-string",ref:function(e){return a.avatarChildren=e}},b)}return h.createElement("span",r()({},d,{className:p}),b)}}]),t}(h.Component);t.a=_,_.defaultProps={prefixCls:"ant-avatar",shape:"circle",size:"default"}},597:function(e,t,a){"use strict";a.r(t);a(141);var n=a(66),r=a(1),o=a.n(r),c=a(0),i=a.n(c),l=a(50),s=a(322),u=a(51),m=a(337),d=function(e){var t=e.booksdata;return o.a.createElement(m.a,{data:t})},f=a(346),p=(a(100),a(598)),h=(a(73),a(67)),b=(a(72),a(15)),E=(a(140),a(65)),g=(a(323),a(368)),v=a(12),y=function(e){var t=e.data;return o.a.createElement("div",{className:"comment_container"},o.a.createElement("h3",null,"留言区："),0!==t.length?o.a.createElement(E.a,{className:"demo-loadmore-list",itemLayout:"horizontal",dataSource:t,renderItem:function(e){return o.a.createElement(E.a.Item,{className:"hover",actions:[o.a.createElement("a",null,"edit"),o.a.createElement("a",null,"more")]},o.a.createElement(E.a.Item.Meta,{avatar:o.a.createElement(g.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:o.a.createElement(v.b,{to:"/seller/"+e.userId},e.userName),description:e.content+"Ant Design, a design language for background applications, is refined by Ant UED Team"}))}}):"暂时没有留言哦")};y.propTypes={data:i.a.array.isRequired};var _=y;a(312);var w=function(e){var t=e.type,a=e.text;return o.a.createElement("span",null,o.a.createElement(b.a,{type:t,style:{marginRight:8}}),a)},k=function(e){var t=e.bookInfo;return console.log(t),o.a.createElement("div",{className:"book_item overflow_hidden"},o.a.createElement("div",{className:"book_pic overflow_hidden"},o.a.createElement("img",{className:"book_pic overflow_hidden",alt:"假面前夜（全新未拆封硬精装）-买卖二手书,就上旧书街",title:"假面前夜（全新未拆封硬精装）-买卖二手书,就上旧书街",src:"http://ubookmall.b0.upaiyun.com/book/2018/04/17/7918248969_1523949760.jpg"})),o.a.createElement("div",{className:"info overflow_hidden"},o.a.createElement("h2",null,t.name),o.a.createElement("div",{className:"detail border_bottom"},o.a.createElement("ul",{className:"paddingNone"},o.a.createElement("li",null,t.author),o.a.createElement("li",null,t.id),o.a.createElement("li",null,"￥"+t.price,o.a.createElement("span",{className:"line-through-price"},"￥"+t.oldPrice),t.oldPrice/t.price+"折"),o.a.createElement("li",null,t.news),o.a.createElement("li",null,"库存："+t.num),o.a.createElement("li",null,"类别："+t.category)))),o.a.createElement("div",{className:"book_introduction_container border_bottom"},t.describe),o.a.createElement("div",{className:"book_view_action_container overflow_hidden"},o.a.createElement("div",{style:{float:"left",width:"134px"}},o.a.createElement("div",{id:"bdshare",className:"bdshare_b",style:{lineHeight:"12px"}},o.a.createElement("img",{src:"http://bdimg.share.baidu.com/static/images/type-button-1.jpg"})),o.a.createElement("script",{type:"text/javascript",id:"bdshare_js",data:"type=button",src:"http://bdimg.share.baidu.com/static/js/bds_s_v2.js?cdnversion=423941"}),o.a.createElement("script",{type:"text/javascript"},'document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + new Date().getHours();')),o.a.createElement("div",null,o.a.createElement("ul",{className:"buy_container paddingNone algin_right overflow_hidden"},o.a.createElement("li",null,o.a.createElement(w,{type:"star-o",text:"156"})),o.a.createElement("li",null,o.a.createElement(w,{type:"like-o",text:"156"})),o.a.createElement("li",null,o.a.createElement(w,{type:"message",text:"2"})),o.a.createElement("li",null,o.a.createElement(h.a,{href:"/sell/create/id/89942385",type:"primary",icon:"shopping-cart"},"购  买"))))),o.a.createElement("div",{className:"comment_container border_bottom"},o.a.createElement("h3",null,"我要留言（限255字）:"),o.a.createElement(p.a.TextArea,{maxLength:255,autosize:{minRows:6,maxRows:12},placeholder:"请发表对此书的评论"}),o.a.createElement("div",{className:"algin_right comment_submit "},o.a.createElement(h.a,{href:"/sell/create/id/89942385",type:"primary",icon:"shopping-cart"},"购  买"))),o.a.createElement(_,{data:t.comment}))};k.propTypes={bookInfo:i.a.object.isRequired};var N={SellBooks:d,BookInfo:k,UserInfo:f.a},j=a(54);var I=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){var e=this.context.router.route.match.params.id;u.a.dispatch(Object(s.a)("detailPage",{bookId:e},"/detail"))},t.prototype.render=function(){n.a.Header;var e=n.a.Content,t=n.a.Sider,a=this.props,r=a.userInfo,c=a.goodsilderBooks,i=a.book,l=a.status;a.match;return"success"===l?o.a.createElement(n.a,{className:"gray_bgColor"},o.a.createElement(t,{width:"300",className:"white_bgColor"},o.a.createElement(N.UserInfo,{userInfo:r}),o.a.createElement(N.SellBooks,{booksdata:[c]})),o.a.createElement(e,{className:"margin_left"},o.a.createElement(N.BookInfo,{bookInfo:i}))):o.a.createElement(j.a,{loading:!0})},t}(r.Component);I.contextTypes={router:i.a.object};t.default=Object(l.connect)(function(e,t){var a=e.asyncReducer.goodsilderBooks,n=e.detailData,r=n.userInfo,o=n.book,c=n.status,i=e.loginInOutReducer.isLogin;return console.log(c),{goodsilderBooks:a,userInfo:r,book:o,status:c,isLogin:i}})(I)}}]);